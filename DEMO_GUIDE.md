# H∆∞·ªõng D·∫´n Demo - Transaction trong SQL Server 2022

## üéØ T√≥m T·∫Øt N·ªôi Dung Demo

### 1. C√°c L·ªánh Transaction C∆° B·∫£n
- **BEGIN TRANSACTION** - B·∫Øt ƒë·∫ßu giao d·ªãch
- **UPDATE** - C·∫≠p nh·∫≠t d·ªØ li·ªáu trong transaction
- **COMMIT TRANSACTION** - X√°c nh·∫≠n thay ƒë·ªïi
- **ROLLBACK** - Ho√†n t√°c giao d·ªãch
- **SAVE TRANSACTION** - T·∫°o savepoint
- **Xem log giao d·ªãch** - Theo d√µi transaction log

### 2. Demo Chuy·ªÉn Ti·ªÅn (T√¨nh Hu·ªëng Th·ª±c T·∫ø)
```sql
-- T·∫°o b·∫£ng t√†i kho·∫£n
CREATE TABLE Accounts (
    AccountID INT PRIMARY KEY,
    Balance DECIMAL(10,2)
);

-- Ch√®n d·ªØ li·ªáu m·∫´u
INSERT INTO Accounts VALUES (1, 1000.00), (2, 500.00);

-- TR∆Ø·ªöC khi chuy·ªÉn ti·ªÅn
SELECT * FROM Accounts;

-- Transaction chuy·ªÉn ti·ªÅn (ƒë·∫£m b·∫£o t√≠nh nguy√™n t·ª≠)
BEGIN TRANSACTION;
    UPDATE Accounts SET Balance = Balance - 200 WHERE AccountID = 1;
    UPDATE Accounts SET Balance = Balance + 200 WHERE AccountID = 2;
COMMIT TRANSACTION;

-- SAU khi chuy·ªÉn ti·ªÅn
SELECT * FROM Accounts;
```

### 3. Demo ROLLBACK v√† SAVE TRANSACTION
```sql
BEGIN TRANSACTION;
    UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
    SAVE TRANSACTION SavePoint1;
    UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 2;
    -- Rollback v·ªÅ savepoint
    ROLLBACK TRANSACTION SavePoint1;
COMMIT TRANSACTION;
```

### 4. Xem Transaction Log
```sql
-- Xem log giao d·ªãch
SELECT * FROM sys.fn_dblog(NULL, NULL);
```

### 5. T√≠nh NƒÉng M·ªõi SQL Server 2022
- **Accelerated Database Recovery (ADR)** - Ph·ª•c h·ªìi nhanh h∆°n
- **Intelligent Query Processing** - T·ªëi ∆∞u h√≥a transaction
- **Memory-Optimized TempDB** - C·∫£i thi·ªán hi·ªáu su·∫•t
- **Enhanced Transaction Log** - Log management t·ªët h∆°n

## üöÄ C√°c B∆∞·ªõc Demo Chi Ti·∫øt

### B∆∞·ªõc 1: Chu·∫©n B·ªã Database
```sql
CREATE DATABASE TransactionDemo;
USE TransactionDemo;
```

### B∆∞·ªõc 2: Demo Transaction C∆° B·∫£n
1. T·∫°o b·∫£ng v√† d·ªØ li·ªáu m·∫´u
2. Th·ª±c hi·ªán BEGIN TRANSACTION
3. Th·ª±c hi·ªán UPDATE
4. Demo COMMIT v√† ROLLBACK

### B∆∞·ªõc 3: Demo Chuy·ªÉn Ti·ªÅn
1. Hi·ªÉn th·ªã d·ªØ li·ªáu TR∆Ø·ªöC transaction
2. Th·ª±c hi·ªán transaction chuy·ªÉn ti·ªÅn
3. Hi·ªÉn th·ªã d·ªØ li·ªáu SAU transaction
4. Ch·ª©ng minh t√≠nh nguy√™n t·ª≠ (ACID)

### B∆∞·ªõc 4: Demo SAVE TRANSACTION
1. T·∫°o savepoint trong transaction
2. Th·ª±c hi·ªán rollback v·ªÅ savepoint
3. So s√°nh k·∫øt qu·∫£

### B∆∞·ªõc 5: Xem Transaction Log
1. Ki·ªÉm tra log entries
2. Ph√¢n t√≠ch transaction history

## ‚ö° Script Demo Ho√†n Ch·ªânh
```sql
-- Setup
CREATE DATABASE TransactionDemo;
USE TransactionDemo;
CREATE TABLE Accounts (AccountID INT PRIMARY KEY, Balance DECIMAL(10,2));
INSERT INTO Accounts VALUES (1, 1000.00), (2, 500.00);

-- Demo chuy·ªÉn ti·ªÅn
SELECT 'TR∆Ø·ªöC' AS Status, * FROM Accounts;
BEGIN TRANSACTION;
    UPDATE Accounts SET Balance = Balance - 200 WHERE AccountID = 1;
    UPDATE Accounts SET Balance = Balance + 200 WHERE AccountID = 2;
COMMIT TRANSACTION;
SELECT 'SAU' AS Status, * FROM Accounts;
```

## üìù ƒêi·ªÉm Nh·∫•n Demo
- T√≠nh nguy√™n t·ª≠ c·ªßa transaction
- S·ª± kh√°c bi·ªát COMMIT vs ROLLBACK
- ·ª®ng d·ª•ng th·ª±c t·∫ø trong chuy·ªÉn ti·ªÅn
- T√≠nh nƒÉng m·ªõi SQL Server 2022

## üîó T√†i Li·ªáu Tham Kh·∫£o
- [Ph·∫ßn 1: C∆° b·∫£n](./TRANSACTION_SQL_SERVER_2022.md)
- [Ph·∫ßn 2: N√¢ng cao](./TRANSACTION_SQL_SERVER_2022_Part2.md)
- [Ph·∫ßn 3: T·ªëi ∆∞u h√≥a](./TRANSACTION_SQL_SERVER_2022_Part3.md)
- [Ph·∫ßn 4: Th·ª±c t·∫ø](./TRANSACTION_SQL_SERVER_2022_Part4.md)